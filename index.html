<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PUBG Ban Checker</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 50px auto; }
        input, button { padding: 8px; font-size: 16px; margin: 5px 0; }
        .result { margin-top: 10px; }
    </style>
</head>
<body>

<h1>PUBG Ban Checker</h1>

<label for="players">Enter player names (comma separated):</label><br>
<input type="text" id="players" list="suggestions" placeholder="RoboLemming5000, ExamplePlayer">
<datalist id="suggestions"></datalist>
<button id="checkBtn">Check Ban Status</button>

<div class="result" id="results"></div>

<script>
const input = document.getElementById('players');
const dataList = document.getElementById('suggestions');
const resultsDiv = document.getElementById('results');
const checkBtn = document.getElementById('checkBtn');

input.addEventListener('input', async () => {
    const current = input.value.split(',').pop().trim();
    if (!current) return;

    try {
        const response = await fetch(`https://pubg-ban-checker-backend.onrender.com/suggest-players?q=${encodeURIComponent(current)}`);
        const suggestions = await response.json();
        dataList.innerHTML = '';
        suggestions.forEach(name => {
            const option = document.createElement('option');
            option.value = name;
            dataList.appendChild(option);
        });
    } catch (err) {
        dataList.innerHTML = '';
    }
});

checkBtn.addEventListener('click', async () => {
    const players = input.value.split(',').map(p => p.trim()).filter(Boolean);
    resultsDiv.innerHTML = '';

    for (const player of players) {
        try {
            const response = await fetch(`https://pubg-ban-checker-backend.onrender.com/check-ban?player=${encodeURIComponent(player)}&platform=steam`);
            const data = await response.json();
            const div = document.createElement('div');
            div.textContent = `${player}: ${data.banStatus || data.error}`;
            resultsDiv.appendChild(div);
        } catch (err) {
            const div = document.createElement('div');
            div.textContent = `${player}: Failed to fetch`;
            resultsDiv.appendChild(div);
        }
    }
});
</script>

</body>
</html>
